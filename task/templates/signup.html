<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mi Perfil Profesional - Cristopher Villa</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
    *{ box-sizing: border-box; }

    body{
        margin: 0;
        font-family: 'Inter', sans-serif;
        background: #0f172a;
        color: #334155;
    }

    /* ===== MENU LATERAL ===== */
    .sidebar{
        position: fixed; top: 0; left: 0; width: 230px; height: 100vh;
        background: #020617; padding: 30px 20px; overflow-y: auto; z-index: 100;
    }

    .sidebar h2{ color: #e5e7eb; font-family: 'Poppins', sans-serif; font-size: 18px; margin-bottom: 20px; border-bottom: 2px solid #38bdf8; display: inline-block; }

    .nav-btn{
        width: 100%; background: none; border: none; color: #cbd5f5;
        padding: 12px; margin-bottom: 8px; text-align: left;
        cursor: pointer; border-radius: 8px; transition: 0.3s; font-size: 14px;
        display: flex; align-items: center; gap: 10px;
    }

    .nav-btn:hover, .nav-btn.activo{ background: #1e293b; color: #38bdf8; padding-left: 20px; }

    /* ===== CONTENEDOR DE ACCIONES ===== */
    .top-actions {
        position: fixed; top: 25px; right: 40px;
        display: flex; gap: 12px; z-index: 200;
    }

    .btn-top {
        background: #1e293b; color: #38bdf8; border: 1px solid #38bdf8;
        padding: 10px 18px; border-radius: 8px; cursor: pointer;
        font-weight: 600; font-size: 13px; transition: 0.3s;
        display: flex; align-items: center; gap: 8px; text-decoration: none;
    }

    .btn-top:hover { background: #38bdf8; color: #020617; box-shadow: 0 0 15px rgba(56, 189, 248, 0.4); }
    .btn-admin { border-color: #f472b6; color: #f472b6; }
    .btn-admin:hover { background: #f472b6; color: white; }

    #btn-inicio-float { display: none; }

    /* ===== PANEL DESCARGA ===== */
    .btn-toggle-descarga {
        width: 100%; background: #1e293b; border: 1px solid #38bdf8;
        color: #38bdf8; padding: 12px; border-radius: 8px;
        cursor: pointer; font-weight: 600; margin-top: 20px; text-align: center;
    }

    .panel-descarga { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; background: #020617; }
    .panel-descarga.abierto { max-height: 500px; padding: 15px 0; }
    .check-item { display: flex; align-items: center; color: #94a3b8; font-size: 12px; margin-bottom: 10px; cursor: pointer; }
    .check-item input { margin-right: 10px; accent-color: #38bdf8; }
    .btn-pdf-final { width: 100%; background: #38bdf8; color: #020617; border: none; padding: 12px; border-radius: 6px; font-weight: 700; cursor: pointer; }

    /* ===== CONTENIDO PRINCIPAL ===== */
    .main{ margin-left: 230px; padding: 40px; position: relative; min-height: 100vh; }
    
    .header{ 
        background: linear-gradient(135deg, #020617, #0a1f44); 
        color: white; padding: 35px; border-radius: 14px; 
        text-align: center; margin-bottom: 30px; 
    }
    
.foto-perfil { 
        width: 160px;   /* Tama√±o intermedio perfecto */
        height: 160px; 
        border-radius: 50%; 
        border: 4px solid #38bdf8; 
        margin-bottom: 20px;
        object-fit: cover; 
        display: inline-block;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); /* Sombra para dar profundidad */
        background-color: #1e293b;
    }

    .header h1 {
        font-size: 2rem; /* Un poco m√°s grande para acompa√±ar la foto */
        margin-top: 10px;
        font-family: 'Poppins', sans-serif;
    }

    .seccion{ display: none; }
    .seccion.activa{ display: block; animation: fade 0.5s ease; }
    
    @keyframes fade{ from{opacity: 0; transform: translateY(10px);} to{opacity: 1; transform: translateY(0);} }

    .card{ 
        background: #ffffff; border-radius: 14px; padding: 25px; 
        margin-bottom: 20px; border-left: 5px solid #38bdf8; 
        box-shadow: 0 10px 20px rgba(0,0,0,0.1); 
    }
    .card h3 { color: #020617; font-family: 'Poppins', sans-serif; margin-top: 0; margin-bottom: 15px; }
    .card h4 { font-size: 11px; color: #64748b; letter-spacing: 0.5px; margin-bottom: 6px; font-weight: 700; font-family: 'Poppins', sans-serif; text-transform: uppercase; }
    .card p { margin: 4px 0; font-size: 13.5px; color: #334155; line-height: 1.6; }

    .exp-header {
        display: flex; justify-content: space-between; align-items: flex-start;
        border-bottom: 1px solid #f1f5f9; padding-bottom: 15px; margin-bottom: 15px;
    }
    .exp-status { display: flex; gap: 8px; }
    .fecha-badge { background: #f1f5f9; color: #475569; padding: 4px 10px; border-radius: 15px; font-size: 11px; font-weight: 600; display: flex; align-items: center; gap: 5px; }
    .status-badge { background: #10b981; color: white; padding: 4px 10px; border-radius: 5px; font-size: 11px; font-weight: 700; }
    
    .categoria-badge { background: #e0f2fe; color: #0369a1; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; display: inline-flex; align-items: center; gap: 6px; border: 1px solid #bae6fd; margin-bottom: 10px;}

    .btn-archivo {
        display: inline-block; padding: 6px 14px; border: 1px solid #38bdf8;
        color: #38bdf8; text-decoration: none; border-radius: 5px;
        font-size: 12px; font-weight: 600; transition: 0.3s; margin-top: 10px;
    }
    .btn-archivo:hover { background: #38bdf8; color: white; }

    .solo-pdf {
        visibility: hidden;
        position: absolute;
        left: -9999px;
    }

    .mostrar-pdf {
        visibility: visible;
        position: static;
    }



    /* ESTILO GARAGE TIPO LISTA */
    .garage-header-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .total-badge { background: #f1f5f9; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; }
    .item-lista-garage {
        display: flex; align-items: center; background: #ffffff;
        border: 1px solid #e2e8f0; border-radius: 15px; padding: 15px;
        margin-bottom: 15px; transition: 0.3s;
    }
.certificados-pdf {
    display: none;
}

.certificados-pdf.mostrar-pdf {
    display: block;
}

.img-certificado {
    width: 100%;
    max-width: 700px;
    display: block;
    margin: 20px auto;
    page-break-inside: avoid;
}
.img-garage {
    width: 100%;
    max-width: 300px;
    display: block;
    margin: 10px 0;
    page-break-inside: avoid;
}
    .img-garage-cont { width: 140px; height: 100px; background: #f8fafc; border-radius: 10px; overflow: hidden; margin-right: 20px; flex-shrink: 0; }
    .img-garage-cont img { width: 100%; height: 100%; object-fit: cover; }
    .info-garage-cont { flex-grow: 1; }
    .info-garage-cont h4 { margin: 0; font-size: 16px; color: #020617; text-transform: none; font-family: 'Poppins'; }
    .info-garage-cont .pub-date { font-size: 12px; color: #94a3b8; margin-bottom: 8px; display: block; }
    .info-garage-cont .label-desc { font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; margin-top: 10px; display: block; }
    .side-price-cont { text-align: right; min-width: 110px; }
    .side-price-cont .precio-val { font-size: 18px; font-weight: 700; color: #38bdf8; margin-bottom: 10px; display: block; }
    .status-pill { padding: 4px 12px; border-radius: 8px; font-size: 11px; font-weight: 700; display: inline-flex; align-items: center; gap: 5px; }
    .pill-excelente { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
    .pill-regular { background: #fef9c3; color: #854d0e; border: 1px solid #fef08a; }
</style>
</head>
<body>

<div class="sidebar">
    <h2>Trayectoria</h2>
    <button id="nav-inicio" class="nav-btn activo" onclick="mostrar('inicio', this)">üë§ Inicio</button>
    <button class="nav-btn" onclick="mostrar('experiencia', this)">üíº Experiencia</button>
    <button class="nav-btn" onclick="mostrar('reconocimientos', this)">üèÜ Logros</button>
    <button class="nav-btn" onclick="mostrar('cursos', this)">üìö Cursos</button>
    <button class="nav-btn" onclick="mostrar('educacion', this)">üéì Productos Acad√©micos</button>
    <button class="nav-btn" onclick="mostrar('productos', this)">üíª Productos Laborales</button>
    <button class="nav-btn" onclick="mostrar('garage', this)">üöó Garage</button>

    <button class="btn-toggle-descarga" onclick="togglePanel()">üì• Opciones de PDF</button>
    <div id="panelDescarga" class="panel-descarga">
        <label class="check-item"><input type="checkbox" class="pdf-opt" value="inicio" checked> Inicio</label>
        <label class="check-item"><input type="checkbox" class="pdf-opt" value="experiencia" checked> Experiencia</label>
        <label class="check-item"><input type="checkbox" class="pdf-opt" value="reconocimientos" checked> Reconocimientos</label>
        <label class="check-item"><input type="checkbox" class="pdf-opt" value="cursos" checked> Cursos</label>
        <label class="check-item"><input type="checkbox" class="pdf-opt" value="educacion" checked> Productos Acad√©micos</label>
        <label class="check-item"><input type="checkbox" class="pdf-opt" value="productos" checked> Productos Laborales</label>
        <label class="check-item"><input type="checkbox" class="pdf-opt" value="garage" checked> Garage</label>
        <button class="btn-pdf-final" onclick="generarPDF()">Descargar PDF</button>
    </div>
</div>

<div class="main" id="cv-render">
    <div class="top-actions">
        <a href="../admin" class="btn-top btn-admin">üîë Administraci√≥n</a>
        <button id="btn-inicio-float" class="btn-top" onclick="irAInicio()">üè† Inicio</button>
    </div>

    <div id="cv-area-impresion">
        <div class="header">
    {% if perfil.foto %}
    <img src="{{ perfil.foto.url }}" class="foto-perfil">
{% endif %}
<h1>{{ perfil.nombres }} {{ perfil.apellidos }}</h1>
    <p>{{ perfil.descripcionperfil }}</p>
    <!-- CERTIFICADOS SOLO PARA PDF -->


</div>

        <div id="inicio" class="seccion activa">
            <div class="card">
                <h3>DATOS PERSONALES</h3>
                <p><strong>C√©dula:</strong> {{ perfil.numerocedula }}</p>
                <p><strong>Nacionalidad:</strong> {{ perfil.nacionalidad }}</p>
                <p><strong>lugar nacimiento:</strong> {{ perfil.lugarnacimiento }}</p>
                <p><strong>Fecha de nacimiento:</strong> {{ perfil.fechanacimiento }}</p>
                <p><strong>Direcci√≥n:</strong> {{ perfil.direcciondomiciliaria }}</p>
                <p><strong>Genero:</strong> {{ perfil.sexo }}</p>
                <p><strong>Estado civil:</strong> {{ perfil.estadocivil }}</p>
                <p><strong>Licencia de conducir:</strong> {{ perfil.licenciaconducir }}</p>
                <p><strong>Celular:</strong> {{ perfil.telefonofijo }}</p>
                <p><strong>Telf. convencional:</strong> {{ perfil.telefonoconvencional }}</p>
                <p><strong>Direcci√≥n de trabajo:</strong> {{ perfil.direcciontrabajo }}</p>
                <p><strong>Sitio Web:</strong> {{ perfil.sitioweb }}</p>
            </div>
        </div>

        <div id="experiencia" class="seccion">
            
            <div class="card">
                <div class="exp-header">
            <h3 style="margin:0;">Experiencia Laboral</h3>
        </div>
                <div class="exp-header">


                    
                    {% for exp in experiencias %}
<div class="card">
    <p><strong>Cargo:</strong> {{ exp.cargodesempenado }}</p>
    <p><strong>Nombre de la Empresa:</strong> {{ exp.nombrempresa }}</p>
    <p><strong>Lugar Empresa:</strong> {{ exp.lugarempresa }}</p>
    <p><strong>Email de la empresa:</strong> {{ exp.emailempresa }}</p>
    <p><strong>Sitio Web:</strong> {{ exp.sitiowebempresa }}</p>
    <p><strong>Nombre de Contacto:</strong> {{ exp.nombrecontactoempresarial }}</p>
    <p><strong>Tel√©fono:</strong> {{ exp.telefonocontactoempresarial }}</p>    
    

    <span class="fecha-badge">
        Desde: {{ exp.fechainiciogestion }} ‚Äî Hasta: {{ exp.fechafingestion }}
    </span>

    <p><strong>Descripci√≥n Funciones:</strong> {{ exp.descripcionfunciones }}</p>

    {% if exp.rutacertificado %}
        <a href="{{ exp.rutacertificado.url }}" target="_blank" class="btn-archivo no-pdf">
            üìÑ Ver certificado
        </a>

        
    {% endif %}
</div>
{% endfor %}
                </div>
            </div>
        </div>

        <div id="reconocimientos" class="seccion">
            <div class="card">
                <div class="exp-header">
            <h3 style="margin:0;">Logros</h3>
        </div>
                <div class="reco-header">
                    {% for reco in logros %}
<div class="card">

    <p><strong>Tipo Reconocimiento:</strong> {{ reco.tiporeconocimiento }}</p>
    <p><strong>Fecha:</strong> {{ reco.fechareconocimiento }}</p>
    <p><strong>Descripci√≥n:</strong> {{ reco.descripcionreconocimiento }}</p>
    <p><strong>Entidad:</strong> {{ reco.entidadpatrocinadora }}</p>
    <p><strong>Contacto:</strong> {{ reco.nombrecontactoauspicia }}</p>
    <p><strong>Tel√©fono:</strong> {{ reco.telefonocontactoauspicia }}</p>


    {% if reco.rutacertificado %}
        <a href="{{ reco.rutacertificado.url }}" target="_blank" class="btn-archivo no-pdf">
            üìÑ Ver certificado
        </a>
    {% endif %}
</div>
{% endfor %}
            </div>
        </div>
        </div>

    <div id="cursos" class="seccion">
    <div class="card">
        <div class="exp-header">
            <h3 style="margin:0;">Formaci√≥n Complementaria</h3>
        </div>

        <div class="curso-header">
            {% for curso in cursos %}
                <div class="card">
                    <p><strong>Curso Realizado:</strong> {{ curso.nombrecurso }}</p>
                    <p><strong>Fecha Inicio:</strong> {{ curso.fechainicio }}</p>
                    <p><strong>Fecha Fin:</strong> {{ curso.fechafin }}</p>
                    <p><strong>Total Horas:</strong> {{ curso.totalhoras }}</p>
                    <p><strong>Descripci√≥n:</strong> {{ curso.descripcioncurso }}</p>
                    <p><strong>Entidad:</strong> {{ curso.entidadpatrocinadora }}</p>
                    <p><strong>Nombre:</strong> {{ curso.nombrecontactoauspicia }}</p>
                    <p><strong>Tel√©fono:</strong> {{ curso.telefonocontactoauspicia }}</p>
                    <p><strong>Email:</strong> {{ curso.emailempresapatrocinadora }}</p>

                    {% if curso.rutacertificado %}
                        <a href="{{ curso.rutacertificado.url }}" target="_blank" class="btn-archivo no-pdf">
                            üìÑ Ver certificado
                        </a>
                    {% endif %}
                </div>
            {% empty %}
                <p>No hay cursos registrados.</p>
            {% endfor %}
        </div>
    </div>
</div>

        <div id="educacion" class="seccion">
            <div class="card">
                <div class="exp-header">
            <h3 style="margin:0;">Productos Acad√©micos</h3>
        </div>
                <div class="exp-header">
                    
                    {% for academicos in prod_academicos %}
<div class="card">

    <p><strong>Nombre Curso:</strong> {{ academicos.nombrerecurso }}</p>
    <p><strong>Clasificador:</strong> {{ academicos.clasificador }}</p>
    <p><strong>Descripci√≥n:</strong> {{ academicos.descripcion }}</p>
    
</div>
{% endfor %}
                </div>
                
            </div>
        </div>

        <div id="productos" class="seccion">
            <div class="card">
                <div class="exp-header">
            <h3 style="margin:0;">Productos Laborales</h3>
        </div>
                <div class="exp-header">
                    

{% for laborales in prod_laborales %}
<div class="card">

    <p><strong>Nombre Producto:</strong> {{ laborales.nombreproducto }}</p>
    <p><strong>Fecha:</strong> {{ laborales.fechaproducto }}</p>
    <p><strong>Descripci√≥n:</strong> {{ laborales.descripcion }}</p>
    
</div>
{% endfor %}



                </div>
                
            </div>
        </div>

        <div id="garage" class="seccion">
            <div class="card">
                <div class="garage-header-flex">
                    <div>
                        <h3 style="margin:0;">Venta de Garage</h3>
                        <p style="margin:0; color:#64748b; font-size:14px;">Productos publicados</p>
                    </div>

{% for garaje in articulos_garage %}
<div class="card">

    <p><strong>Nombre Producto:</strong> {{ garaje.nombreproducto }}</p>
    <p><strong>Estado:</strong> {{ garaje.estadoproducto }}</p>
    <p><strong>Descripci√≥n:</strong> {{ garaje.descripcion }}</p>
    <p><strong>Precio:</strong> {{ garaje.valordelbien }}</p>
    <p><strong>Fecha Publicaci√≥n:</strong> {{ garaje.fechapublicacion }}</p>
    

    {% if garaje.articulo %}
    <div class="imagen-garage">
        <img 
            src="{{ garaje.articulo.url }}" 
            alt="Imagen de {{ garaje.nombreproducto }}"
            class="img-garage"
        >
    </div>
{% else %}
    <p><em>Sin imagen disponible</em></p>
{% endif %}



</div>
{% endfor %}
            </div>


                   
                </div>

                
                </div>


<!-- CERTIFICADOS EXPERIENCIA -->
<div class="certificados-pdf seccion-cert" data-seccion="experiencia">
    <h3>Certificados de Experiencia Laboral</h3>
    {% for exp in experiencias %}
        {% if exp.rutacertificado %}
            <img src="{{ exp.rutacertificado.url }}" class="img-certificado">
        {% endif %}
    {% endfor %}
</div>

<!-- CERTIFICADOS CURSOS -->
<div class="certificados-pdf seccion-cert" data-seccion="cursos">
    <h3>Certificados de Cursos</h3>
    {% for curso in cursos %}
        {% if curso.rutacertificado %}
            <img src="{{ curso.rutacertificado.url }}" class="img-certificado">
        {% endif %}
    {% endfor %}
</div>

<!-- CERTIFICADOS RECONOCIMIENTOS -->
<div class="certificados-pdf seccion-cert" data-seccion="reconocimientos">
    <h3>Certificados de Reconocimientos</h3>
    {% for reco in logros %}
        {% if reco.rutacertificado %}
            <img src="{{ reco.rutacertificado.url }}" class="img-certificado">
        {% endif %}
    {% endfor %}
</div>

               
            </div>
        </div>

    </div>
</div>

<script>
function mostrar(id, boton){
    document.querySelectorAll('.seccion').forEach(s => s.classList.remove('activa'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('activo'));
    document.getElementById(id).classList.add('activa');
    if(boton) boton.classList.add('activo');
    const btnHome = document.getElementById('btn-inicio-float');
    btnHome.style.display = (id === 'inicio') ? 'none' : 'flex';
}
function irAInicio() { mostrar('inicio', document.getElementById('nav-inicio')); }
function togglePanel() { document.getElementById('panelDescarga').classList.toggle('abierto'); }

function generarPDF() {
    const area = document.getElementById('cv-area-impresion');
    const checks = document.querySelectorAll('.pdf-opt');
    const secciones = area.querySelectorAll('.seccion');
    const certificados = area.querySelectorAll('.seccion-cert');
    const botones = area.querySelectorAll('.no-pdf');

    /* 1Ô∏è‚É£ Ocultar botones */
    botones.forEach(b => b.style.display = 'none');

    /* 2Ô∏è‚É£ FORZAR VISIBILIDAD PDF DE CERTIFICADOS (CLAVE) */
    certificados.forEach(cert => cert.classList.add('mostrar-pdf'));

    /* 3Ô∏è‚É£ Guardar estado original */
    const estado = [];
    [...secciones, ...certificados].forEach(el => {
        estado.push({ el, display: el.style.display });
    });

    /* 4Ô∏è‚É£ Mostrar / ocultar secciones */
    checks.forEach(chk => {
        const sec = area.querySelector(`#${chk.value}`);
        if (sec) sec.style.display = chk.checked ? 'block' : 'none';
    });

    /* 5Ô∏è‚É£ Mostrar certificados SOLO si su secci√≥n est√° activa */
    certificados.forEach(cert => {
        const seccion = cert.dataset.seccion;
        const chk = [...checks].find(c => c.value === seccion);
        cert.style.display = chk && chk.checked ? 'block' : 'none';
    });

    /* 6Ô∏è‚É£ Configuraci√≥n PDF */
    const config = {
        margin: 10,
        filename: 'CV_Cristopher_Villa.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    /* 7Ô∏è‚É£ Generar PDF y restaurar */
    html2pdf().set(config).from(area).save().then(() => {
        estado.forEach(e => e.el.style.display = e.display);
        botones.forEach(b => b.style.display = '');
        certificados.forEach(cert => cert.classList.remove('mostrar-pdf'));
    });
}
function abrirPDF() {
    const areaImpresion = document.getElementById('cv-area-impresion');
    const opciones = document.querySelectorAll('.pdf-opt');
    const todasLasSecciones = areaImpresion.querySelectorAll('.seccion');

    /* =====================================================
       1Ô∏è‚É£ OCULTAR BOTONES (NO DEBEN SALIR EN EL PDF)
    ===================================================== */
    const botonesPDF = areaImpresion.querySelectorAll('.no-pdf');
    botonesPDF.forEach(btn => btn.style.display = 'none');

    /* =====================================================
       2Ô∏è‚É£ MOSTRAR BLOQUES DE CERTIFICADOS (POR SECCI√ìN)
    ===================================================== */
    const bloquesCertificados = areaImpresion.querySelectorAll('.seccion-cert');
    bloquesCertificados.forEach(bloque => {
        bloque.style.display = 'block'; // se ajusta luego seg√∫n check
    });

    /* =====================================================
       3Ô∏è‚É£ GUARDAR ESTADO ORIGINAL
    ===================================================== */
    const estadosOriginales = [];

    todasLasSecciones.forEach(sec => {
        estadosOriginales.push({
            element: sec,
            display: sec.style.display,
            animation: sec.style.animation
        });
    });

    bloquesCertificados.forEach(bloque => {
        estadosOriginales.push({
            element: bloque,
            display: bloque.style.display
        });
    });

    /* =====================================================
       4Ô∏è‚É£ MOSTRAR / OCULTAR SECCIONES SEG√öN CHECK
    ===================================================== */
    opciones.forEach(opt => {
        const seccion = areaImpresion.querySelector(`#${opt.value}`);
        if (seccion) {
            seccion.style.display = opt.checked ? 'block' : 'none';
            seccion.style.animation = 'none';
        }
    });

    /* =====================================================
       5Ô∏è‚É£ MOSTRAR / OCULTAR CERTIFICADOS SEG√öN CHECK
       (ESTA ES LA CLAVE DE TU PROBLEMA)
    ===================================================== */
    bloquesCertificados.forEach(bloque => {
        const seccionAsociada = bloque.dataset.seccion;
        const checkbox = Array.from(opciones).find(
            opt => opt.value === seccionAsociada
        );

        if (checkbox) {
            bloque.style.display = checkbox.checked ? 'block' : 'none';
        }
    });

    /* =====================================================
       6Ô∏è‚É£ CONFIGURACI√ìN PDF
    ===================================================== */
    const config = {
        margin: 10,
        filename: 'CV_Cristopher_Villa.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: {
            scale: 2,
            useCORS: true
        },
        jsPDF: {
            unit: 'mm',
            format: 'a4',
            orientation: 'portrait'
        }
    };

    /* =====================================================
       7Ô∏è‚É£ GENERAR PDF Y RESTAURAR TODO
    ===================================================== */
    html2pdf().set(config).from(areaImpresion).save().then(() => {

        estadosOriginales.forEach(e => {
            e.element.style.display = e.display ?? '';
            e.element.style.animation = e.animation ?? '';
        });

        botonesPDF.forEach(btn => btn.style.display = '');
    });
}
function generarPDFAnterior() {
    const areaImpresion = document.getElementById('cv-area-impresion');
    const opciones = document.querySelectorAll('.pdf-opt');
    const todasLasSecciones = areaImpresion.querySelectorAll('.seccion');

    // üîπ NUEVO 1: ocultar botones en PDF
    const botonesPDF = areaImpresion.querySelectorAll('.no-pdf');
    botonesPDF.forEach(btn => btn.style.display = 'none');

    // üîπ NUEVO 2: mostrar certificados como im√°genes
    const certificadosPDF = document.getElementById('certificados-pdf');
    if (certificadosPDF) certificadosPDF.classList.add('mostrar-pdf');

    // ===== TU C√ìDIGO ORIGINAL (NO SE TOCA) =====
    const estadosOriginales = [];
    todasLasSecciones.forEach(s => {
        estadosOriginales.push({
            element: s,
            display: s.style.display
        });
    });

    opciones.forEach(opt => {
        const seccion = areaImpresion.querySelector(`#${opt.value}`);
        if (seccion) {
            seccion.style.display = opt.checked ? 'block' : 'none';
            seccion.style.animation = 'none';
        }
    });

    const config = {
        margin: 10,
        filename: 'CV_Cristopher_Villa.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().set(config).from(areaImpresion).save().then(() => {

        // üîπ RESTAURAR TODO
        estadosOriginales.forEach(e => {
            e.element.style.display = e.display;
            e.element.style.animation = '';
        });

        botonesPDF.forEach(btn => btn.style.display = '');
        if (certificadosPDF) certificadosPDF.classList.remove('mostrar-pdf');
    });
}


function generarPDFOLD() {
    const areaImpresion = document.getElementById('cv-area-impresion');
    const opciones = document.querySelectorAll('.pdf-opt');
    const todasLasSecciones = areaImpresion.querySelectorAll('.seccion');

    // 1. Guardar el estado original de visibilidad
    const estadosOriginales = [];
    todasLasSecciones.forEach(s => {
        estadosOriginales.push({ element: s, display: s.style.display, isActiva: s.classList.contains('activa') });
    });

    // 2. Preparar el √°rea para la captura: Mostrar solo lo marcado en el panel
    opciones.forEach(opt => {
        const seccion = areaImpresion.querySelector(`#${opt.value}`);
        if (seccion) {
            seccion.style.display = opt.checked ? 'block' : 'none';
            // Quitamos la animaci√≥n para que no salga movido en el PDF
            seccion.style.animation = 'none';
        }
    });

    // 3. Configuraci√≥n optimizada para capturar im√°genes externas
    const config = {
        margin: 10,
        filename: 'CV_Cristopher_Villa.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { 
            scale: 2, 
            useCORS: true, // ESTO ES VITAL para que salga la foto
            logging: false,
            letterRendering: true
        },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    // 4. Generar y restaurar la vista web original al terminar
    html2pdf().set(config).from(areaImpresion).save().then(() => {
        // Restaurar todo como estaba antes de la descarga
        estadosOriginales.forEach(estado => {
            estado.element.style.display = estado.display;
            estado.element.style.animation = ''; // Restaurar animaciones
        });
    });

    
}
</script>

</body>
</html>